export const translations = {
  pt: {
    // Bot√µes principais
    connect: "üîå Conectar",
    stop: "üõë Desconectar",
    disconnect: "üõë Parar Compartilhamento",
    
    // Status da conex√£o
    statusDisconnected: "Desconectado",
    statusMining: "Compartilhando", // ‚úÖ Texto base para anima√ß√£o
    statusConnecting: "Conectando",
    statusError: "Erro de Conex√£o",
    
    // Interface geral
    received: "Voc√™ j√° recebeu:",
    config: "‚öôÔ∏è Configura√ß√µes",
    login: "üîê Login",
    logout: "üö™ Sair",
    networkQuality: "Qualidade da Rede:",
    dashboard: "üñ•Ô∏è Dashboard",
    selectThreadsLabel: "N√≠vel de Compartilhamento:",
    theme: "üåì Tema",
    faq: "‚ùì F.A.Q",
    
    // Modal de configura√ß√µes
    settingsTitle: "Configura√ß√µes",
    selectLanguage: "Idioma:",
    languageLabel: "Idioma:",
    save: "Salvar",
    close: "Fechar",
    
    // Modal de login
    loginTitle: "Entrar / Cadastrar",
    orText: "ou",
    emailPlaceholder: "Seu e-mail",
    passwordPlaceholder: "Senha",
    loginBtn: "Entrar",
    registerBtn: "Cadastrar",
    
    // Sauda√ß√£o do usu√°rio
    greeting: "Ol√°, ",
    
    // Gr√°fico de uso - ‚úÖ ATUALIZADO para BIG Points
    usageGraphTitle: "Hist√≥rico de Compartilhamento",
    bigPointsGraphTitle: "Hist√≥rico de BIG Points",
    toggleGraph: "Ocultar Gr√°fico",
    showGraph: "Mostrar Gr√°fico",
    
    // Estados de qualidade de rede
    qualityExcellent: "Excelente",
    qualityGood: "Boa",
    qualityFair: "Regular",
    qualityPoor: "Ruim",
    qualityOffline: "Offline",
    
    // Mensagens de status
    connecting: "Conectando ao servidor...",
    connected: "Conectado com sucesso!",
    disconnecting: "Desconectando...",
    disconnected: "Desconectado do servidor",
    error: "Erro na conex√£o"
  },
  
  en: {
    // Main buttons
    connect: "üîå Connect",
    stop: "üõë Disconnect", 
    disconnect: "üõë Stop Sharing",
    
    // Connection status
    statusDisconnected: "Disconnected",
    statusMining: "Sharing", // ‚úÖ Base text for animation
    statusConnecting: "Connecting",
    statusError: "Connection Error",
    
    // General interface
    received: "You've received:",
    config: "‚öôÔ∏è Settings",
    login: "üîê Login",
    logout: "üö™ Logout",
    networkQuality: "Network Quality:",
    dashboard: "üñ•Ô∏è Dashboard",
    selectThreadsLabel: "Sharing Level:",
    theme: "üåì Theme",
    faq: "‚ùì F.A.Q",
    
    // Settings modal
    settingsTitle: "Settings",
    selectLanguage: "Language:",
    languageLabel: "Language:",
    save: "Save",
    close: "Close",
    
    // Login modal
    loginTitle: "Login / Register",
    orText: "or",
    emailPlaceholder: "Your email",
    passwordPlaceholder: "Password",
    loginBtn: "Login",
    registerBtn: "Register",
    
    // User greeting
    greeting: "Hello, ",
    
    // Usage graph - ‚úÖ UPDATED for BIG Points
    usageGraphTitle: "Sharing History",
    bigPointsGraphTitle: "BIG Points History",
    toggleGraph: "Hide Graph",
    showGraph: "Show Graph",
    
    // Network quality states
    qualityExcellent: "Excellent",
    qualityGood: "Good",
    qualityFair: "Fair", 
    qualityPoor: "Poor",
    qualityOffline: "Offline",
    
    // Status messages
    connecting: "Connecting to server...",
    connected: "Successfully connected!",
    disconnecting: "Disconnecting...",
    disconnected: "Disconnected from server",
    error: "Connection error"
  },
  
  // ‚úÖ Adicionando suporte para espanhol (opcional)
  es: {
    // Botones principales
    connect: "üîå Conectar",
    stop: "üõë Desconectar",
    disconnect: "üõë Detener Compartir",
    
    // Estado de conexi√≥n
    statusDisconnected: "Desconectado",
    statusMining: "Compartiendo", // ‚úÖ Texto base para animaci√≥n
    statusConnecting: "Conectando",
    statusError: "Error de Conexi√≥n",
    
    // Interfaz general
    received: "Has recibido:",
    config: "‚öôÔ∏è Configuraci√≥n",
    login: "üîê Iniciar Sesi√≥n",
    logout: "üö™ Salir",
    networkQuality: "Calidad de Red:",
    dashboard: "üñ•Ô∏è Panel",
    selectThreadsLabel: "Nivel de Compartir:",
    theme: "üåì Tema",
    faq: "‚ùì Preguntas Frecuentes",
    
    // Modal de configuraci√≥n
    settingsTitle: "Configuraci√≥n",
    selectLanguage: "Idioma:",
    languageLabel: "Idioma:",
    save: "Guardar",
    close: "Cerrar",
    
    // Modal de login
    loginTitle: "Iniciar Sesi√≥n / Registrarse",
    orText: "o",
    emailPlaceholder: "Tu email",
    passwordPlaceholder: "Contrase√±a",
    loginBtn: "Iniciar Sesi√≥n",
    registerBtn: "Registrarse",
    
    // Saludo del usuario
    greeting: "Hola, ",
    
    // Gr√°fico de uso - ‚úÖ ACTUALIZADO para BIG Points
    usageGraphTitle: "Historial de Compartir",
    bigPointsGraphTitle: "Historial de BIG Points",
    toggleGraph: "Ocultar Gr√°fico",
    showGraph: "Mostrar Gr√°fico",
    
    // Estados de calidad de red
    qualityExcellent: "Excelente",
    qualityGood: "Buena",
    qualityFair: "Regular",
    qualityPoor: "Mala",
    qualityOffline: "Sin conexi√≥n",
    
    // Mensajes de estado
    connecting: "Conectando al servidor...",
    connected: "¬°Conectado exitosamente!",
    disconnecting: "Desconectando...",
    disconnected: "Desconectado del servidor",
    error: "Error de conexi√≥n"
  }
};

// ‚úÖ Configura√ß√£o do idioma atual
export let currentLang = localStorage.getItem('bigfootLang') || 'pt';

// ‚úÖ Fun√ß√£o para definir idioma
export function setLanguage(lang) {
  console.log('üåê Salvando idioma:', lang);
  
  // Valida se o idioma √© suportado
  if (!translations[lang]) {
    console.warn(`Idioma ${lang} n√£o suportado, usando 'pt' como padr√£o`);
    lang = 'pt';
  }
  
  currentLang = lang;
  localStorage.setItem('bigfootLang', currentLang);
  
  // Atualiza o atributo lang do HTML
  const htmlElement = document.documentElement;
  if (htmlElement) {
    const langMap = { pt: 'pt-BR', en: 'en-US', es: 'es-ES' };
    htmlElement.lang = langMap[lang] || 'pt-BR';
  }
}

// ‚úÖ Fun√ß√£o para obter tradu√ß√£o espec√≠fica
export function t(key, lang = currentLang) {
  const translation = translations[lang];
  if (!translation) {
    console.warn(`Idioma ${lang} n√£o encontrado, usando 'pt'`);
    return translations.pt[key] || key;
  }
  
  return translation[key] || translations.pt[key] || key;
}

// ‚úÖ Fun√ß√£o para atualizar op√ß√µes do seletor de threads
export function updateThreadOptionsLanguage(threadSelector) {
  if (!threadSelector) {
    console.warn('Thread selector n√£o encontrado');
    return;
  }
  
  console.log('üîÑ Atualizando op√ß√µes de threads, idioma:', currentLang);
  
  const options = threadSelector.querySelectorAll('option');
  options.forEach(option => {
    // Pega o texto traduzido baseado no idioma atual
    const label = currentLang === 'en' ? option.dataset.en : 
                  currentLang === 'es' ? option.dataset.es || option.dataset.pt :
                  option.dataset.pt;
    
    // Mant√©m o emoji original
    const emoji = option.textContent.match(/^[^\s]+/);
    const emojiPrefix = emoji ? emoji[0] + ' ' : '';
    
    option.textContent = `${emojiPrefix}${label}`;
  });
}

// ‚úÖ Fun√ß√£o para obter lista de idiomas dispon√≠veis
export function getAvailableLanguages() {
  return Object.keys(translations).map(code => ({
    code,
    name: {
      pt: 'Portugu√™s',
      en: 'English', 
      es: 'Espa√±ol'
    }[code] || code.toUpperCase()
  }));
}

// ‚úÖ Fun√ß√£o para detectar idioma do navegador
export function detectBrowserLanguage() {
  const browserLang = navigator.language || navigator.userLanguage;
  const langCode = browserLang.split('-')[0]; // Pega apenas 'pt' de 'pt-BR'
  
  // Retorna o idioma se suportado, sen√£o retorna 'pt' como padr√£o
  return translations[langCode] ? langCode : 'pt';
}

// ‚úÖ Inicializa√ß√£o autom√°tica baseada no navegador (se n√£o h√° prefer√™ncia salva)
if (!localStorage.getItem('bigfootLang')) {
  const detectedLang = detectBrowserLanguage();
  setLanguage(detectedLang);
}

// ‚úÖ Disponibiliza as tradu√ß√µes globalmente para uso em outros scripts
if (typeof window !== 'undefined') {
  window.translations = translations;
  window.currentLang = currentLang;
  window.t = t;
}